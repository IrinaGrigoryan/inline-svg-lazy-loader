!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.inlineSvgLazyLoader=t():e.inlineSvgLazyLoader=t()}(self,(()=>(()=>{"use strict";var e={d:(t,i)=>{for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>i});class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"js-lazy-inline-svg",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.element=e,this.inlineSvg=null,this.options=t||{loadingClass:"js-svg-loading"},this.observerOptions={threshold:[.1]},this.checkBeforeInit()}checkBeforeInit(){if("string"==typeof this.element){const e=[...document.querySelectorAll(`.${this.element}`)];e&&e.forEach((e=>new i(e,this.options)))}else this.init()}init(){this.addInlineSvgObserver()}addInlineSvgObserver(){const e=new IntersectionObserver((t=>{t.forEach((t=>{const{isIntersecting:i}=t;i&&(this.getSvg(),e.unobserve(this.element))}))}),this.observerOptions);e.observe(this.element)}async getSvg(){const{src:e}=this.element.dataset,{loadingClass:t}=this.options;this.element.classList.add(t);try{const t=await fetch(e);if(t.ok){const e=await t.text();this.inlineSvg=this.parseSvgStringToHtml(e),this.replaceImgWithSvg()}}catch(e){console.error(e)}finally{this.element.classList.remove(t)}}replaceImgWithSvg(){this.removeAttrs(),this.removeScripts(),this.addAttrs(),this.setSvgSize(),this.element.parentNode&&this.element.parentNode.replaceChild(this.inlineSvg,this.element)}parseSvgStringToHtml(e){return(new DOMParser).parseFromString(e,"text/html").querySelector("svg")}removeAttrs(){const{removeAttrs:e}=this.element.dataset;e&&e.split(",").forEach((e=>{const t=e.trim();this.inlineSvg.removeAttribute(t)}))}addAttrs(){const{addAttrs:e}=this.element.dataset;if(e){const t=/([\w\d\-\s*]+):\s*[\w\d\-\s*]+/g;e.match(t).forEach((e=>{const[t,i]=e.split(":");this.inlineSvg.setAttribute(t.trim(),i.trim())}))}}setSvgSize(){const{setSvgSize:e}=this.element.dataset;e&&["width","height"].forEach((e=>{this.inlineSvg.setAttribute(e,this.element[e])}))}removeScripts(){const{removeScripts:e}=this.element.dataset;if(e){const e=this.inlineSvg.querySelectorAll("script"),t=this.inlineSvg.getAttributeNames();if(e.forEach((e=>{e.remove()})),t){const e=/^on\w*/i;t.forEach((t=>{t.match(e)&&this.inlineSvg.removeAttribute(t)}))}}}}return"undefined"!=typeof window&&(window.InlineSvgLazyLoader=i),t})()));